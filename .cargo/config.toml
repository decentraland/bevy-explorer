[target.x86_64-pc-windows-msvc]
rustflags = ["-C", "target-feature=+crt-static"]

[target.aarch64-pc-windows-msvc]
rustflags = ["-C", "target-feature=+crt-static"]

[target.x86_64-apple-darwin]
rustflags = ["-C", "link-args=-ObjC"]

[target.aarch64-apple-darwin]
rustflags = ["-C", "link-args=-ObjC"]

[target.wasm32-unknown-unknown]
# rustflags = ["--cfg=web_sys_unstable_apis"]
rustflags = ["--cfg=web_sys_unstable_apis", "-C", "target-feature=+atomics,+bulk-memory,+mutable-globals", "-C", "link-arg=--shared-memory", "-C", "link-arg=--max-memory=4294967296"]

[env]
RUST_BACKTRACE = "1"
CARGO_FEATURE_CRT_STATIC = "ohyes"

[unstable]
build-std = ["std", "panic_abort"]

# uncomment for rust analyzer to attempt (and fail) to use wasm32 as default
# [build]
# target = "wasm32-unknown-unknown"
